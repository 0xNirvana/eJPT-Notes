- Authentication & Verification of user credentials is carried out by Local Security Authority (LSA)
- SAM (Security Account Manager) is a database file that is responsible for managing user accounts and passwords on Windows.
- SAM cant be copied when the system is ruuning
- Windows NT kernel keeps SAM db file locked and hence attackers use in-memory techniques and tools to dump SAM hashes from LSASS process
- In modern machines SAM db is encrypted with a syskey.
- Elevated privileges are required to acess the LSASS service
- We can dump hashes with `hashdump` or #tools/post/windows/Mimikatz 
- For cracking we can use #tools/bruteforce/john or #tools/bruteforce/hashcat

## Dump hashes using `hashdump`
- Get a meterpreter session
- Migrate to `lsass`
- run `hashdump`

## Crack hashes
- Store the hashes in a file and run the command
- With #tools/bruteforce/john 
	```
	john --format=NT <filename> 
	```
	- You can provide a separate wordlist as well `--wordlist=<path>`
- With #tools/bruteforce/hashcat 
	```
	hashcat -a3 -m 1000 <filename> <wordlist>
	```
- If you can't crack the hashes then you can use #tools/exploit/psexec_py to access the machine